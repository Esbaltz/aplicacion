<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title class="ion-text-center">Inicio de Sesi칩n</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content class="ion-padding content-container">

  <div class="xd">

    <div class="logo-container">
      <img src="assets/img/duoc_logo.png" alt="Duoc Logo" class="logo" />
    </div>

    <ng-container *ngIf="sesion.isLoggedIn(); else loginForm">
      <ion-list class="ion-padding">
        <ion-item>
          <ion-label class="ion-padding">Correo:</ion-label>

          <ion-text color="primary" class="ion-padding">{{ sesion.getUser()?.correo}}</ion-text>
        </ion-item>
        <br>
        <ion-button expand="block" color="danger" (click)="sesion.logout(); router.navigate(['/login']) "
          (click)="Reload()">
          Cerrar sesi칩n
        </ion-button>
        <ion-button expand="block" routerLink="/tabs/cursos"> Volver al Menu</ion-button>
      </ion-list>
    </ng-container>

    <div class="form-wrapper">
      <ion-card-content>
        <ng-template #loginForm>

          <form #inicioForm="ngForm" (ngSubmit)="Loguear2!(inicioForm)">

            <ion-item>
              <ion-icon class="icono" name="mail-outline"></ion-icon>
              <ion-input required labelPlacement="floating" label="Correo Institucional" type="text"
                [(ngModel)]="usr.correo" name="username"></ion-input>
            </ion-item>

            <br>

            <ion-item class="password-container">
              <ion-icon class="icono" name="lock-closed"></ion-icon>
              <ion-input labelPlacement="floating" label="Contrase침a" [type]="showPassword ? 'text' : 'password'"
                [(ngModel)]="usr.password" name="password" required>
              </ion-input>
              <ion-icon [name]="showPassword ? 'eye-off' : 'eye'" slot="end" color="#000"
                (click)="togglePasswordVisibility()">
              </ion-icon>
            </ion-item>

            <div class="button-container">
              <ion-button class="submit-button" type="submit" color="primary" [disabled]="inicioForm.invalid">
                Iniciar sesi칩n
              </ion-button>
              <ion-button class="submit-button" type="submit" color="secondary"  routerLink="/registro">
                Registrarse
              </ion-button>
            </div>
            
          </form>

        </ng-template>
      </ion-card-content>
    </div>
  </div>
</ion-content>